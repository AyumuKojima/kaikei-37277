<%= render partial: "layouts/header" %>
<div class="main">
  <%= render partial: "layouts/side-bar" %>
  <div class="contents">
    <div class="calendar">
      <div class="calendar-heading">
        <% if @month == 1 %>
          <%= link_to '◀︎', year_month_spends_path(@year - 1, 12), class: "last-month-btn" %>
        <% else %>
          <%= link_to '◀︎', year_month_spends_path(@year, @month - 1), class: "last-month-btn" %>
        <% end %>
        <p id="display-year"><%= @year %></p>年 <p id="display-month"><%= @month %></p>月
        <span id="wday_num"><%= Date.new(@year, @month, 1).wday %></span>
        <% if @month == 12 %>
          <%= link_to '▶︎', year_month_spends_path(@year + 1, 1), class: "next-month-btn" %>
        <% else %>
          <%= link_to '▶︎', year_month_spends_path(@year, @month + 1), class: "next-month-btn" %>
        <% end %>
      </div>
      <div class="spend-sum" id="month-sum">
        合計出費額：<%= @sum %>円
      </div>
      <div class="show-list">
        <div class="show-day">
          支出一覧
        </div>
        <% Date.new(@year, @month, 1).end_of_month.day.times do |i| %>
          <% if @each_day_spends[i].length != 0 %>
            <div class="show-box">
              <% @each_day_spends[i].each do |spend| %>
                <div class="show-info">
                  <div class="show-date">
                    <%= spend.day.to_s %>
                  </div>
                  <div class="category-mark">
                    <%= spend.category_id %>
                  </div>
                  <div class="show-spend">
                    <%= spend.money %>円
                  </div>
                  <div class="show-memo">
                    <%= spend.memo %>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>