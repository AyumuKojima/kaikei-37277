<div class="main-contents" style="padding-top: 2%;">
  <div class="category">
    <div class="category-box">
      <div class="category-box-header">
        <p id="current-category-id" class="hidden"><%= @category.id %></p>
        <div class="category-title centering" id="category-title">
          <%= @category.title %>
        </div>
        <div class="category-btns" id="category-btns">
          <div class="category-show category-btn">
            <p class="btn centering" id="category-edit-btn">編集</p>
          </div>
          <div class="category-delete category-btn">
            <a class="btn centering pointer" id="category-delete-btn">削除</a>
          </div>
        </div>
      </div>
      <div class="category-box-footer">
        <div class="category-bar-border">
          <div class="category-bar" id="category-bar" >
            <span class="percentage hidden" id="category-prop"><%= @each_props[@index-1] %></span>
            <span class="color-id hidden" id="color-id"><%= @category.color_id %></span>
            <div class="category-money-sum" id="category-sum">
              <%= @each_sums[@index-1] %>円
            </div>
          </div>
        </div>
        <div class="percentage-values">
          <p>0</p>
          <p>50</p>
          <p>100 (%)</p>
        </div>
      </div>
    </div>
  </div>
  <div class="category-show-list">
    <div class="show-list" id="show-list" style="height: 96%;">
      <div class="show-day centering">
        支出一覧
      </div>
      <% Date.new(@year, @month, 1).end_of_month.day.times do |i| %>
        <% if @each_day_spends[i].length != 0 %>
          <div class="show-box">
            <% @each_day_spends[i].each do |spend| %>
              <div class="show-info pointer">
                <span class="hidden select-category-id"><%= spend.category_id %></span>
                <div class="show-date centering">
                  <%= spend.day.to_s %>
                </div>
                <div class="category-mark centering">
                  <%= @index %>
                </div>
                <div class="show-spend centering">
                  <%= spend.money %>円
                </div>
                <div class="show-memo">
                  <%= spend.memo %>
                </div>
                <div class="show-id hidden">
                  <%= spend.id %>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
    <div class="destroy-message-box hidden" id="destroy-message-box">
      このカテゴリーを削除しますか？
      <div class="destroy-messages">
        <p class="destroy-message">カテゴリーを削除すると、このカテゴリーに紐付いたすべての支出情報が削除されます。</p>
        <p class="destroy-message">削除したくない支出がある場合、支出を編集して別のカテゴリーに設定しましょう。</p>
      </div>
      <div class="category-destroy-btns">
        <%= link_to "カテゴリーを削除する", year_month_category_path(@year, @month, @category.id), method: "delete", class: "category-destroy-btn centering", id: "category-destroy-complete-btn" %>
        <%= link_to "キャンセル", year_month_category_path(@year, @month, @category.id), class: "destroy-cancel-btn centering", id: "destroy-cancel-btn" %>
      </div>
    </div>
  </div>
</div>
<div class="sub-contents" id="sub-contents">
  <div class="edit-category-contents" id="edit-category-contents" style="display: none;">
    <%= render partial: "category-form", locals: { form_text: "カテゴリーを編集", submit_text: "カテゴリーを編集する" } %>
  </div>

  <%= render partial: "spends/spend-form", locals: { edit_spend: true, form_text: "支出を編集" } %>

  <div class="hidden">
    <% @select_categories.each do |category| %>
      <span class="color-index"><%= category.color_id %></span>
      <span class="category-name"><%= category.title %></span>
    <% end %>
  </div>
  <div id="color-list" style="display: none;">
    <% @colors.each do |color| %>
      <div class="color">(<%= color.rgb[0] %>, <%= color.rgb[1] %>, <%= color.rgb[2] %>)</div>
      <div class="thin-color">(<%= color.rgb[0] %>, <%= color.rgb[1] %>, <%= color.rgb[2] %>, 0.22)</div>
    <% end %>
  </div>
</div>